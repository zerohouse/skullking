"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}),String.prototype.startsWith||(String.prototype.startsWith=function(a){return 0===this.lastIndexOf(a,0)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),angular.module("app",["angular.essential","ngSanitize","ngAnimate","ui.router","toastr","ui.bootstrap","ngDialog"]),Array.prototype.find||(Array.prototype.find=function(a,b){var c,d=this,e=d.length;for(c=0;e>c;c+=1)if(a.call(b,d[c],c,d))return d[c];return void 0}),Array.prototype.next=function(a){var b=this.indexOf(a)+1;return this.length<=b&&(b=0),this[b]},Date.prototype.format=function(a){return moment().format(a)},Date.prototype.getDateTime=function(){return this.getDateString()+" ("+this.getDayKR()+") "+this.getTimeString()},Date.prototype.toYMD=function(){return(new Date).isSameDay(this)?this.fromNow():this.getDateTime()},Number.prototype.toYMD=function(){return new Date(this).toYMD()},Date.prototype.getDateString=function(){return this.getFullYear()===(new Date).getFullYear()?moment(this).format("M. D"):moment(this).format("YYYY. M. D.")},Date.prototype.isPast=function(){return this.getTime()<(new Date).getTime()},Date.prototype.fromNow=function(){return moment(this).fromNow()},Date.prototype.getTimeString=function(){return moment(this).format("HH:mm")},Date.prototype.isSameDay=function(a){return a?this.getFullYear()===a.getFullYear()&&this.getMonth()===a.getMonth()&&this.getDate()===a.getDate():!1},Date.prototype.range=function(a){var b,c;return a>=this?(b=this,c=a):(b=a,c=this),this.isSameDay(a)?this.getDateString()+" ("+this.getDayKR()+") "+b.getTimeString()+" ~ "+c.getTimeString():b.toYMD()+" ~ "+c.toYMD()},Array.prototype.contains||(Array.prototype.contains=function(a){var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;e>=0?d=e:(d=c+e,0>d&&(d=0));for(var f;c>d;){if(f=b[d],a===f||a!==a&&f!==f)return!0;d++}return!1}),Array.prototype.ignoreTypeContains=function(a){var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;e>=0?d=e:(d=c+e,0>d&&(d=0));for(var f;c>d;){if(f=b[d],a==f||a!=a&&f!=f)return!0;d++}return!1},Array.prototype.toggle=function(a){return this.contains(a)?void this.remove(a):void this.push(a)},Array.prototype.remove=function(a){this.contains(a)&&this.splice(this.indexOf(a),1)},Array.prototype.pushIfNotExist=function(a){this.contains(a)||this.push(a)},Array.prototype.findById=function(a){return this.findBy("id",a)},Array.prototype.findBy=function(a,b){return this.find(function(c){return c[a]==b})},Array.prototype.removeBy=function(a,b){return this.remove(this.findBy(a,b))},Array.prototype.removeById=function(a){return this.remove(this.findBy("id",a))},Array.prototype.pushAll=function(a){var b=this;a&&a.forEach&&a.forEach(function(a){b.push(a)})},Array.prototype.removeAll=function(a){var b=this;a&&a.forEach&&a.forEach(function(a){b.remove(a)})},Array.prototype.last=function(){return this.length?this[this.length-1]:void 0},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.pushInto=function(a,b){var c=this.splice(a);this.push(b),this.pushAll(c)},Number.prototype.toDay=function(){return["월","화","수","목","금","토","일"][this%7]},Number.prototype.toArray=function(){for(var a=[],b=0;this>b;b++)a.push(b);return a},String.prototype.newLine=function(){return this.replace(/\n/g,"<br>")},String.prototype.removeTags=function(){return this.replace(/(<([^>]+)>)|(<[^<]+)$/gi,"")},function(){function a(a,b){a.handler(function(a,c,d){return a.code?(b.alert(a.errmsg),void d(a)):a.errors?(b.alert(JSON.stringify(a.errors)),void d(a)):void c(a)})}a.$inject=["$ajax","popup"],angular.module("app").run(a)}(),angular.module("app").config(["$locationProvider",function(a){a.html5Mode({enabled:!0,requireBase:!1})}]).run(["$rootScope","$state","$window","$location",function(a,b,c,d){a.state=b,a.$on("$stateChangeSuccess",function(){c.ga("send","pageview",d.path())}),c.onbeforeunload=function(a){return b.current.exitConfirm?function(){var b=confirm("변경사항이 유실됩니다.");b||a.preventDefault()}:void 0}}]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("rooms",{url:"/",templateUrl:"/pages/rooms/rooms.html",controller:"roomCtrl"}).state("game",{url:"/game/:id/:player",templateUrl:"/pages/game/game.html",controller:"gameCtrl",layout:"column"}),b.otherwise("/")}]),function(){function a(){return{restrict:"E",scope:{card:"="},templateUrl:"/directives/card/card.html",controller:["$scope","colors",function(a,b){a.getColor=function(a){return b[a]},a.names={}}]}}angular.module("app").directive("card",a)}(),function(){function a(){return{restrict:"E",templateUrl:"/directives/chat/chat.html",controller:["$scope","ChatSocket","$timeout",function(a,b,c){function d(){var a=document.getElementById("chat");c(function(){a.scrollTop=a.scrollHeight})}a.messages=[],a.chatToggle=function(){a.chatShow=!a.chatShow,a.newChat=!1},a.send=function(c){c&&(a.messages.push({message:c,me:!0}),b.emit("chat",{message:c}),a.message="",d())},b.on("chat",function(b){(!a.chatShow||a.log)&&(a.newChat=!0),a.messages.push(b),a.$$phase||a.$apply(),d()}),a.$on("$destroy",function(){b.removeAllListeners("chat")})}]}}angular.module("app").directive("chat",a)}(),function(){function a(){return{restrict:"E",scope:{game:"="},templateUrl:"/directives/history/history.html",controller:["$scope",function(a){a.getPredictions=function(b){return a.game.players.map(function(a){var c=a.predictions[b];return void 0!==c?c+="wins prediction":c=" in prediction...",a.name+": "+c}).join(", ")},a.getPlayer=function(b){return b&&a.game?a.game.players.findById(b):void 0}}]}}angular.module("app").directive("history",a)}(),function(){function a(){return{restrict:"E",link:function(a,b,c){$(b).css("background-image","url(/images/marks/"+c.mark+".png)")}}}angular.module("app").directive("mark",a)}(),function(){function a(a){return{link:function(b,c){var d;a(function(){$(c).draggable({start:function(){d={left:$(this).css("left"),top:$(this).css("top")}},stop:function(){$(this).animate({top:d.top,left:d.left},150)}})})}}}a.$inject=["$timeout"],angular.module("app").directive("ngDrag",a)}(),function(){function a(){return{link:function(a,b,c){$(b).droppable({drop:function(b,d){a.$data=angular.element(d.draggable[0]).scope().$eval(d.draggable.attr("ng-drag-data")),a.$eval(c.ngDropSuccess)}})}}}angular.module("app").directive("ngDrop",a)}(),function(){function a(){return{restrict:"E",templateUrl:"/directives/phase/phase.html",scope:{game:"="},controller:["$scope",function(a){a.getRounds=function(){return a.game?a.game.maxRounds:10},a.getColor=function(b){return b===a.game.round-1&&a.game.rounds[b]?a.game.rounds[b].steps.last().prime:void 0}}]}}angular.module("app").directive("phase",a)}(),function(){function a(){return{restrict:"E",templateUrl:"/directives/player/player.html",scope:{player:"=",index:"=",game:"="},controller:["$scope","$sce",function(a,b){var c=a.$watch("player",function(c){c&&c.points&&(a.log=b.trustAsHtml(c.points.map(function(a){return a.name+" "+(a.point>0?"+":"")+a.point}).join("<br>")))});a.$on("$destroy",function(){c()})}]}}angular.module("app").directive("player",a)}(),function(){function a(){return{restrict:"E",scope:{game:"="},templateUrl:"/directives/prediction/prediction.html",controller:["$scope","ChatSocket","popup",function(a,b,c){a.getDoneSize=function(){return a.game?a.game.players.filter(function(a){return a.prediction}).length:0},a.predict=function(d){d=parseInt(d);var e=0===d?10*a.game.round:20*d,f=0===d?10*a.game.round:"예측 실패 라운드 횟수 * 10";c.confirm("성공시 "+e+"점 획득 <br> 실패시 "+f+"점 차감",d+"승 예측").then(function(){b.emit("playerEvent","predict",d),a.prediction=d})}}]}}angular.module("app").directive("prediction",a)}(),function(){function a(){return{restrict:"E",scope:{color:"="},templateUrl:"/directives/prime-color/prime.html",controller:["$scope","colors",function(a,b){a.getColor=function(a){return b[a]}}]}}angular.module("app").directive("primeColor",a)}(),function(){function a(){return{restrict:"E",scope:{value:"="},templateUrl:"/directives/progress/progress.html",controller:["$scope",function(a){a.getStyle=function(){var b=Math.min(100,a.value),c=b>80?"#da0000":"#59ce2c";return{"background-color":c,width:b+"%"}}}]}}angular.module("app").directive("progressbar",a)}(),function(){function a(){return{restrict:"E",scope:{card:"=",player:"=",game:"="},templateUrl:"/directives/submit-card/submit-card.html"}}angular.module("app").directive("submitCard",a)}(),function(){function a(){return{restrict:"E",scope:{toggle:"@",icon:"@"},templateUrl:"/directives/toggle/toggle.html",link:function(a,b){$(b).on("click",function(){a.$parent[a.toggle]=!a.$parent[a.toggle],a.$apply()}),a.$on("$destroy",function(){$(b).off("click")})}}}angular.module("app").directive("toggle",a)}(),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.ui=a.ui||{},a.ui.version="1.12.1";var b=0,c=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h={},i=b.split(".")[0];b=b.split(".")[1];var j=i+"-"+b;return d||(d=c,c=a.Widget),a.isArray(d)&&(d=a.extend.apply(null,[{}].concat(d))),a.expr[":"][j.toLowerCase()]=function(b){return!!a.data(b,j)},a[i]=a[i]||{},e=a[i][b],f=a[i][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new f(a,b)},a.extend(f,e,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),g=new c,g.options=a.widget.extend({},g.options),a.each(d,function(b,d){return a.isFunction(d)?void(h[b]=function(){function a(){return c.prototype[b].apply(this,arguments)}function e(a){return c.prototype[b].apply(this,a)}return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(h[b]=d)}),f.prototype=a.widget.extend(g,{widgetEventPrefix:e?g.widgetEventPrefix||b:b},h,{constructor:f,namespace:i,widgetName:b,widgetFullName:j}),e?(a.each(e._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,f,c._proto)}),delete e._childConstructors):c._childConstructors.push(f),a.widget.bridge(b,f),f},a.widget.extend=function(b){for(var d,e,f=c.call(arguments,1),g=0,h=f.length;h>g;g++)for(d in f[g])e=f[g][d],f[g].hasOwnProperty(d)&&void 0!==e&&(b[d]=a.isPlainObject(e)?a.isPlainObject(b[d])?a.widget.extend({},b[d],e):a.widget.extend({},e):e);return b},a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=c.call(arguments,1),i=this;return g?this.length||"instance"!==f?this.each(function(){var c,d=a.data(this,e);return"instance"===f?(i=d,!1):d?a.isFunction(d[f])&&"_"!==f.charAt(0)?(c=d[f].apply(d,h),c!==d&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):i=void 0:(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=b++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),this.classesElementLookup={},d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var b=this;this._destroy(),a.each(this.classesElementLookup,function(a,c){b._removeClass(c,a)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;d.length-1>f;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return"classes"===a&&this._setOptionClasses(b),this.options[a]=b,"disabled"===a&&this._setOptionDisabled(b),this},_setOptionClasses:function(b){var c,d,e;for(c in b)e=this.classesElementLookup[c],b[c]!==this.options.classes[c]&&e&&e.length&&(d=a(e.get()),this._removeClass(e,c),d.addClass(this._classes({element:d,keys:c,classes:b,add:!0})))},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a),a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){function c(c,f){var g,h;for(h=0;c.length>h;h++)g=e.classesElementLookup[c[h]]||a(),g=a(b.add?a.unique(g.get().concat(b.element.get())):g.not(b.element).get()),e.classesElementLookup[c[h]]=g,d.push(c[h]),f&&b.classes[c[h]]&&d.push(b.classes[c[h]])}var d=[],e=this;return b=a.extend({element:this.element,classes:this.options.classes||{}},b),this._on(b.element,{remove:"_untrackClassesElement"}),b.keys&&c(b.keys.match(/\S+/g)||[],!0),b.extra&&c(b.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(b){var c=this;a.each(c.classesElementLookup,function(d,e){-1!==a.inArray(b.target,e)&&(c.classesElementLookup[d]=a(e.not(b.target).get()))})},_removeClass:function(a,b,c){return this._toggleClass(a,b,c,!1)},_addClass:function(a,b,c){return this._toggleClass(a,b,c,!0)},_toggleClass:function(a,b,c,d){d="boolean"==typeof d?d:c;var e="string"==typeof a||null===a,f={extra:e?b:c,keys:e?a:b,element:e?this.element:a,add:d};return f.element.toggleClass(this._classes(f),d),this},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.on(j,k,h):c.on(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.off(c).off(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){this._addClass(a(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){this._addClass(a(b.currentTarget),null,"ui-state-focus")},focusout:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])}}),a.fn.scrollParent=function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return d&&"static"===b.css("position")?!1:e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var d=!1;a(document).on("mouseup",function(){d=!1}),a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).on("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,d=!1,b.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;f.length>e;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}},a.ui.safeActiveElement=function(a){var b;try{b=a.activeElement}catch(c){b=a.body}return b||(b=a.body),b.nodeName||(b=a.body),b},a.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&a(b).trigger("blur")},a.widget("ui.draggable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(this._blurActiveElement(b),this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0):!1)},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=a.ui.safeActiveElement(this.document[0]),d=a(b.target);d.closest(c).length||a.ui.safeBlur(c)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp(new a.Event("mouseup",b)),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.trigger("focus"),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),
left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=p>=Math.abs(k-t),f=p>=Math.abs(l-s),g=p>=Math.abs(i-r),h=p>=Math.abs(j-q),e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=p>=Math.abs(k-s),f=p>=Math.abs(l-t),g=p>=Math.abs(i-q),h=p>=Math.abs(j-r),e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}}),a.ui.draggable,a.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;a.length>b;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b)},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this._addActiveClass(),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this._removeActiveClass(),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,f=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&e(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(f=!0,!1):void 0}),f?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var e=a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return f+b.helperProportions.width/2>j&&l>h-b.helperProportions.width/2&&g+b.helperProportions.height/2>k&&m>i-b.helperProportions.height/2;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,f,g,h=e(b,this,this.options.tolerance,c),i=!h&&this.isover?"isout":h&&!this.isover?"isover":null;i&&(this.options.greedy&&(f=this.options.scope,g=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===f}),g.length&&(d=a(g[0]).droppable("instance"),d.greedyChild="isover"===i)),d&&"isover"===i&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[i]=!0,this["isout"===i?"isover":"isout"]=!1,this["isover"===i?"_over":"_out"].call(this,c),d&&"isout"===i&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").off("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}},a.uiBackCompat!==!1&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),a.ui.droppable}),function(){moment.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h시 m분",LLLL:"YYYY년 MMMM D일 dddd A h시 m분"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(a){return"오후"===a},meridiem:function(a,b,c){return 12>a?"오전":"오후"}}),moment().locale("ko")}(),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.tooltip","ui.bootstrap.position","ui.bootstrap.stackedMap"]),angular.module("ui.bootstrap.tpls",["uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html"]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),b=null)}}var o=m.createNew();return h.on("keyup",n),k.$on("$destroy",function(){h.off("keyup",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup uib-title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'origin-scope="origScope" class="uib-position-measure '+k+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(){var a=f(t);return function(b,c,d){function f(){O.isOpen?m():j()}function j(){(!N||b.$eval(d[k+"Enable"]))&&(t(),w(),O.popupDelay?G||(G=g(q,O.popupDelay,!1)):q())}function m(){r(),O.popupCloseDelay?H||(H=g(s,O.popupCloseDelay,!1)):s()}function q(){return r(),t(),O.content?(u(),void O.$evalAsync(function(){O.isOpen=!0,x(!0),T()})):angular.noop}function r(){G&&(g.cancel(G),G=null),I&&(g.cancel(I),I=null)}function s(){O&&O.$evalAsync(function(){O&&(O.isOpen=!1,x(!1),O.animation?F||(F=g(v,150,!1)):v())})}function t(){H&&(g.cancel(H),H=null),F&&(g.cancel(F),F=null)}function u(){D||(E=O.$new(),D=a(E,function(a){L?h.find("body").append(a):c.after(a)}),o.add(O,{close:s}),y())}function v(){r(),t(),z(),D&&(D.remove(),D=null,J&&g.cancel(J)),o.remove(O),E&&(E.$destroy(),E=null)}function w(){O.title=d[k+"Title"],O.content=R?R(b):d[e],O.popupClass=d[k+"Class"],O.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var a=i.parsePlacement(O.placement);K=a[1]?a[0]+"-"+a[1]:a[0];var c=parseInt(d[k+"PopupDelay"],10),f=parseInt(d[k+"PopupCloseDelay"],10);O.popupDelay=isNaN(c)?n.popupDelay:c,O.popupCloseDelay=isNaN(f)?n.popupCloseDelay:f}function x(a){Q&&angular.isFunction(Q.assign)&&Q.assign(b,a)}function y(){S.length=0,R?(S.push(b.$watch(R,function(a){O.content=a,!a&&O.isOpen&&s()})),S.push(E.$watch(function(){P||(P=!0,E.$$postDigest(function(){P=!1,O&&O.isOpen&&T()}))}))):S.push(d.$observe(e,function(a){O.content=a,!a&&O.isOpen?s():T()})),S.push(d.$observe(k+"Title",function(a){O.title=a,O.isOpen&&T()})),S.push(d.$observe(k+"Placement",function(a){O.placement=a?a:n.placement,O.isOpen&&T()}))}function z(){S.length&&(angular.forEach(S,function(a){a()}),S.length=0)}function A(a){O&&O.isOpen&&D&&(c[0].contains(a.target)||D[0].contains(a.target)||m())}function B(a){27===a.which&&m()}function C(){var a=[],e=[],g=b.$eval(d[k+"Trigger"]);U(),angular.isObject(g)?(Object.keys(g).forEach(function(b){a.push(b),e.push(g[b])}),M={show:a,hide:e}):M=p(g),"none"!==M.show&&M.show.forEach(function(a,b){"outsideClick"===a?(c.on("click",f),h.on("click",A)):a===M.hide[b]?c.on(a,f):a&&(c.on(a,j),c.on(M.hide[b],m)),c.on("keypress",B)})}var D,E,F,G,H,I,J,K,L=angular.isDefined(n.appendToBody)?n.appendToBody:!1,M=p(void 0),N=angular.isDefined(d[k+"Enable"]),O=b.$new(!0),P=!1,Q=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,R=n.useContentExp?l(d[e]):!1,S=[],T=function(){D&&D.html()&&(I||(I=g(function(){var a=i.positionElements(c,D,O.placement,L),b=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),d=L?i.offset(c):i.position(c);D.css({top:a.top+"px",left:a.left+"px"});var e=a.placement.split("-");D.hasClass(e[0])||(D.removeClass(K.split("-")[0]),D.addClass(e[0])),D.hasClass(n.placementClassPrefix+a.placement)||(D.removeClass(n.placementClassPrefix+K),D.addClass(n.placementClassPrefix+a.placement)),J=g(function(){var a=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),c=i.adjustTop(e,d,b,a);c&&D.css(c),J=null},0,!1),D.hasClass("uib-position-measure")?(i.positionArrow(D,a.placement),D.removeClass("uib-position-measure")):K!==a.placement&&i.positionArrow(D,a.placement),K=a.placement,I=null},0,!1)))};O.origScope=b,O.isOpen=!1,O.contentExp=function(){return O.content},d.$observe("disabled",function(a){a&&r(),a&&O.isOpen&&s()}),Q&&b.$watch(Q,function(a){O&&!a===O.isOpen&&f()});var U=function(){M.show.forEach(function(a){"outsideClick"===a?c.off("click",f):(c.off(a,j),c.off(a,f)),c.off("keypress",B)}),M.hide.forEach(function(a){"outsideClick"===a?h.off("click",A):c.off(a,m)})};C();var V=b.$eval(d[k+"Animation"]);O.animation=angular.isDefined(V)?!!V:n.animation;var W,X=k+"AppendToBody";W=X in d&&void 0===d[X]?!0:b.$eval(d[X]),L=angular.isDefined(W)?W:L,b.$on("$destroy",function(){U(),v(),O=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}b.popupClass&&c.addClass(b.popupClass),b.animation&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1?!0:!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),a[2]=b?!0:!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},adjustTop:function(a,b,c,d){return-1!==a.indexOf("top")&&c!==d?{top:b.top-d+"px"}:void 0},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),g=a.querySelector(e?".tooltip-arrow":".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";k+=f.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}]),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}}),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),
angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),e.call(b)},d._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),f.call(b)}}}(jQuery),function(){function a(a,b,c,d,e,f,g,h){function i(a,b,c){if(a.type.item)return!0;var d=b.rounds.last().steps.last().prime;return null!==d&&d!==a.type.name&&c.find(function(a){return a.type.name===d})?!1:!0}function j(a,b){var c=a.find(function(a){return a.type.king}),d=a.find(function(a){return a.type.girl}),e=a.find(function(a){return a.type.pirate});if(c)return d?d:c;if(e)return e;if(d)return d;var f=null;return a.forEach(function(a){if(!f)return void(f=a);if(a.type.black){if(!f.type.black)return void(f=a);if(f.no<a.no)return void(f=a)}a.type.name===b&&f.no<a.no&&(f=a)}),f}function k(){a.game&&a.game.duetime&&(a.remain=(new Date).getTime()-a.timeAdjust-a.game.duetime+a.game.duration,a.$apply(),o(k))}a.names={prediction:"Prediction",submit:"Submit a Card"};var l,m=a.game={},n=a.$watch(function(){return d.id},function(a){a&&c.emit("join",{id:a,player:d.player})});a.chatShow=!1,a.userShow=!0,c.on("game",function(b){a.timeAdjust=(new Date).getTime()-m.timeAdjust,angular.copy(b,a.game),m.onGame!==l&&(l=m.onGame,a.chatShow=a.userShow=!m.onGame);var c=m.players.indexOf(m.players.find(function(a){return a.first}));-1===c&&(c=0),m.players.forEach(function(a,b){a.turnIndex=(b>=c?b-c:b+(m.players.length-c))+1}),m.me.turnIndex=m.players.findById(m.me.id).turnIndex;var d;m.rounds&&0!==m.rounds.length&&0!==m.rounds.last().steps.length&&(d=m.rounds.last().steps.last().cards),m.me.cards.forEach(function(a){a.submitable=i(a,m,m.me.cards),d&&(a.winable=j(d.concat(a),m.prime)===a)}),k(),a.$apply()}),c.on("e",function(c){if(b.close(),"stepDone"===c.type){var d=a.$new();return d.messageAlert=c.message,d.cards=c.cards,void b.open("stepDone",d)}b.alert(c)}),c.on("err",function(a){b.close(),b.alert(a),g.go("rooms"),h(function(){location.reload()},1e3)}),c.on("p",function(a){f.alert(a)}),a.startGame=function(){c.emit("event","startGame")},a.name=function(c){a.game.me.id===c.id&&(a.n=a.game.me.name,b.open("name",a))},a.reName=function(b){c.emit("playerEvent","name",b),a.close()},a.submit=function(d){if(!d.submitable)return void f.error("You must submit prime color card first.");if(a.game.me.turn)return"pirateOR"===d.type.name?void b.confirm("You can choose use this card as Pirate or Escape.","Please make choice.","Pirate","Escape").then(function(){c.emit("playerEvent","submit",d.id,!0)},function(){c.emit("playerEvent","submit",d.id,!1)}):void c.emit("playerEvent","submit",d.id)},a.getTurnPlayer=function(){return a.game.players.find(function(a){return a.turn})};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();k(),a.$on("$destroy",function(){n(),c.removeAllListeners("game"),c.removeAllListeners("e"),c.removeAllListeners("err"),c.removeAllListeners("p"),angular.element(e).off("resize")})}a.$inject=["$scope","popup","ChatSocket","$stateParams","$window","pop","$state","$timeout"],angular.module("app").controller("gameCtrl",a)}(),function(){function a(a,b,c,d,e,f,g){a.cards=[{type:{name:"red",red:!0,normal:!0},name:"red",src:"/images/cards/red12.jpg",no:13,id:48},{type:{name:"blue",blue:!0,normal:!0},name:"blue",src:"/images/cards/blue12.jpg",no:13,id:49,submitable:!0},{type:{name:"yellow",yellow:!0,normal:!0},name:"yellow",src:"/images/cards/yellow12.jpg",no:13,id:50,submitable:!0,winable:!0},{type:{name:"black",black:!0,normal:!0},name:"black",src:"/images/cards/black12.jpg",no:13,id:51},{type:{name:"pirate",pirate:!0,item:!0},name:"pirate",src:"/images/cards/pirate4.jpg",no:0,id:56,submitable:!0},{type:{name:"white",white:!0,item:!0},name:"escape",src:"/images/cards/white0.jpg",no:0,id:61,submitable:!0,winable:!0},{type:{name:"girl",girl:!0,item:!0},name:"girl",src:"/images/cards/girl1.jpg",no:0,id:63},{type:{name:"king",king:!0,item:!0},name:"king",src:"/images/cards/king0.jpg",no:0,id:64,submitable:!0},{type:{name:"pirateOR",pirateOR:!0,item:!0},name:"pirate/escape",src:"/images/cards/pirateOR0.jpg",no:0,id:65,submitable:!0,winable:!0}],b.user={},a.rooms=[],a.go=function(a){var f=void 0;return a.password&&(f=prompt("Password?")),b.user._id?void e.get("/api/userPlayerCode",{id:a.id,password:f}).then(function(b){c.go("game",{id:a.id,player:b})}):void d.confirm("When you become a member, you are recorded as a whole and accumulated points.","Do you wish play game as non-member?").then(function(){e.get("/api/playerCode",{id:a.id,password:f}).then(function(b){c.go("game",{id:a.id,player:b})})})},a.makeRoomPopup=function(){return b.user._id?void d.open("makeRoom",a):void f.alert("Non-member can't make a new game.")},a.makeRoom=function(a){e.post("/api/newRoomCode",a,!0).then(function(a){c.go("game",{id:a.room,player:a.player}),d.close()})},a.registerPopup=function(){d.open("register",a)},a.register=function(a){e.post("/api/user",a,!0).then(function(a){b.user=a,d.close()})},a.loginPopup=function(){d.open("login",a)},a.login=function(a){e.post("/api/user/login",a,!0).then(function(a){b.user=a,d.close()})},a.logout=function(){e.get("/api/user/logout").then(function(){b.user={}})},e.get("/api/user").then(function(a){b.user=a?a:{}}),a.refresh=function(){e.get("/api/rooms").then(function(b){a.rooms=b})},a.refresh(),g(a.refresh,5e3),a.refreshRank=function(){e.get("/api/ranks").then(function(b){a.ranks=b,a.ranks.forEach(function(a){0!==a.ranks.length&&(a.avgPoint=a.point/a.ranks.length,a.avgRank=a.ranks.reduce(function(a,b){return a+b.rank/b.players},0)/a.ranks.length)})})},a.refreshRank()}a.$inject=["$scope","$rootScope","$state","popup","$ajax","pop","$interval"],angular.module("app").controller("roomCtrl",a)}(),angular.module("app").factory("colors",function(){return{black:"#5d4d4d",yellow:"#dcc100",red:"#da0000",blue:"#5365e4"}}),function(){function a(a){function b(b,c){a[b](c)}this.success=function(a){b("success",a)},this.alert=function(a){b("info",a)},this.error=function(a){b("error",a)}}a.$inject=["toastr"],angular.module("app").service("pop",a)}();var p;!function(){function a(a,b){a.message=c,a.ok=function(){c.ok(),b.close()},a.no=function(){c.no(),b.close()}}function b(a,b,d,e){var f=this;this.alert=function(a){b.messageAlert=a,f.open("alert",b)},p=this,this.confirm=function(a,b,e,g){return d(function(d,h){c.okBtn=e,c.cancelBtn=g,c.message=a,c.title=b,c.ok=d,c.no=h,f.open("confirm")})},this.open=function(a,b){a.match("html")||(a="/dialog/"+a+".html"),e.open({template:a,scope:b,disableAnimation:!0})},this.close=function(){e.close()},b.close=this.close}a.$inject=["$scope","popup"],b.$inject=["$compile","$rootScope","$q","ngDialog"];var c={};angular.module("app").controller("confirmCtrl",a),angular.module("app").service("popup",b)}(),angular.module("app").factory("ChatSocket",function(){return io.connect("/")}),angular.module("app").run(["$templateCache",function(a){a.put("/dialog/alert.html",'<div ng-bind-html="messageAlert"></div>\r\n<div class="dialog-btns">\r\n    <span class="ngdialog-button ngdialog-button-primary" ng-click="close()">OK</span>\r\n</div>'),a.put("/dialog/confirm.html",'<div ng-controller="confirmCtrl">\r\n    <h3>{{message.title}}</h3>\r\n    <div class="vex-body padding-bottom-10" ng-bind-html="message.message">\r\n    </div>\r\n    <div class="dialog-btns">\r\n        <span class="ngdialog-button ngdialog-button-primary" ng-click="ok()">{{message.okBtn || "OK"}}</span>\r\n        <span class="ngdialog-button ngdialog-button-secondary" ng-click="no()">{{message.cancelBtn || "Cancel"}}</span>\r\n    </div>\r\n</div>'),a.put("/dialog/login.html",'<h3>Login</h3>\r\n<input class="big" ng-model="user.email" placeholder="E-mail">\r\n<input class="big" type="password" ng-enter="login(user)" ng-model="user.password" placeholder="Password">\r\n<span class="btn btn-primary big" ng-click="login(user)">Login</span>'),a.put("/dialog/makeRoom.html",'<h3>Make a Room</h3>\r\n<input class="middle" ng-model="options.name" placeholder="Name (Default: {{user.name}}\'s Room)">\r\n<input class="middle" ng-model="options.submitLimitTime" number-only placeholder="Turn Limit Time(Default: 30Sec)">\r\n<input class="middle" ng-model="options.predictLimitTime" number-only placeholder="Predict Limit Time(Default: 30Sec)">\r\n<input class="middle" ng-model="options.maxRounds" number-only placeholder="Rounds(Default 10, Min 6)">\r\n<input class="middle" ng-model="options.maxSize" number-only placeholder="Max players(Default: 6)">\r\n<input class="middle" ng-model="options.password" type="password" placeholder="Password">\r\n<div ng-click="cardOptions=!cardOptions">Card deck customize</div>\r\n<div ng-show="cardOptions">\r\n    <input class="middle" ng-model="options.cards.numbers" placeholder="Numbers(Default:13)" number-only>\r\n    <input class="middle" ng-model="options.cards.pirate" placeholder="Pirate(Default: 5)" number-only>\r\n    <input class="middle" ng-model="options.cards.pirateOR" placeholder="Pirate/Escape(Default: 1)" number-only>\r\n    <input class="middle" ng-model="options.cards.white" placeholder="Escape(Default: 5)" number-only>\r\n    <input class="middle" ng-model="options.cards.girl" placeholder="Girl(Default: 2)" number-only>\r\n    <input class="middle" ng-model="options.cards.king" placeholder="King(Default: 1)" number-only>\r\n</div>\r\n<span class="btn btn-primary big" ng-click="makeRoom(options)">Make a Room</span>'),a.put("/dialog/name.html",'<input type="text" ng-model="n" placeholder="Name">\r\n<div class="dialog-btns">\r\n    <span class="ngdialog-button ngdialog-button-primary" ng-click="reName(n)">Modify Name</span>\r\n</div>'),a.put("/dialog/register.html",'<div>Register</div>\r\n<input class="big" ng-model="user.email" placeholder="E-mail">\r\n<input class="big" ng-model="user.name" placeholder="Name">\r\n<input class="big" type="password" ng-enter="register(user)" ng-model="user.password" placeholder="Password">\r\n<span class="btn btn-primary big" ng-click="register(user)">Register</span>'),a.put("/dialog/stepDone.html",'<div ng-bind-html="messageAlert"></div>\r\n<card card="card" ng-repeat="card in cards" class="stepDone"></card>\r\n<div class="dialog-btns">\r\n    <span class="ngdialog-button ngdialog-button-primary" ng-click="close()">OK</span>\r\n</div>'),a.put("/directives/card/card.html",'<div class="back" ng-class="card.type.name" ng-style="{\'background-image\':\'url(\'+card.src+\')\'}">\r\n    <div class="no first" ng-class="card.type.name" ng-if="card.type.normal">{{card.no}}</div>\r\n    <div class="no second" ng-class="card.type.name" ng-if="card.type.normal">{{card.no}}</div>\r\n    <div class="name">{{card.name}}</div>\r\n    <div class="win" ng-if="card.win">win</div>\r\n</div>\r\n'),a.put("/directives/chat/chat.html",'<div class="messages" id="chat">\r\n    <div class="message" ng-repeat="message in messages" ng-class="{right:message.me}"><span\r\n            ng-if="!message.me">{{message.name}}</span><span class="message-body">{{message.message}}</span></div>\r\n</div>\r\n<div class="layout-row sendbox">\r\n    <input placeholder="Message" ng-model="message" ng-enter="send(message)" class="flex">\r\n    <div class="send" ng-click="send(message)">Send</div>\r\n</div>'),a.put("/directives/history/history.html",'<table class="table table-striped">\r\n    <thead>\r\n    <tr>\r\n        <th>Round</th>\r\n        <th>Phase</th>\r\n        <th>Prime Color</th>\r\n        <th ng-repeat="player in game.players">{{$index+1}}</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody ng-repeat="round in game.rounds">\r\n    <tr>\r\n        <td colspan="4">\r\n            {{getPredictions($index + 1)}}\r\n        </td>\r\n    </tr>\r\n    <tr ng-repeat="step in round.steps">\r\n        <td>\r\n            {{$parent.$index+1}}\r\n        </td>\r\n        <td>\r\n            {{$index+1}}\r\n        </td>\r\n        <td>\r\n            <prime-color ng-if="step.prime" color="step.prime"></prime-color>\r\n        </td>\r\n        <td ng-repeat="card in step.cards">\r\n            <span ng-class="{bold:card.win}">\r\n                {{card.name || card.type.name +\' \' + card.no}}\r\n                </span>\r\n            <br>\r\n            <small>{{getPlayer(card.player).name}}</small>\r\n        </td>\r\n    </tr>\r\n    </tbody>\r\n</table>'),a.put("/directives/phase/phase.html",'<div class="layout-row">\r\n    <div ng-class="{done:round<game.round-1,now:round===game.round-1,flex:round!==game.round-1}"\r\n         ng-repeat="round in getRounds().toArray()">\r\n        <span class="ball" ng-if="game.phase===\'prediction\'"></span>\r\n        <span ng-if="round===game.round-1">{{round+1}} Round {{game.phase===\'prediction\'?\'Prediction\':\'Submit\'}}</span>\r\n        <span class="ball" ng-if="game.phase!==\'prediction\'"\r\n              ng-style="{\'background-color\':getColor($index,$last)}"></span>\r\n    </div>\r\n</div>\r\n'),a.put("/directives/player/player.html",'<b>\r\n    {{player.turnIndex}}.\r\n    {{player.name}}</b>\r\n<span uib-tooltip-html="log" style="color:rebeccapurple;margin-left:6px">{{player.point}}Point</span>\r\n<span ng-if="game.onGame">\r\n    <span class="prediction" ng-if="game.phase!==\'prediction\'">{{player.win}}<small>win/</small>{{player.prediction || 0}}<small>prediction</small></span>\r\n            <span class="prediction" ng-if="game.phase===\'prediction\'">\r\n            <span class="sub-not" ng-if="!player.prediction">Prediction...</span>\r\n            <span class="sub-done" ng-if="player.prediction">Done</span>\r\n        </span>\r\n        </span>\r\n<span style="margin-left:5px"></span>\r\n<span class="label label-warning" ng-if="player.maker && !game.onGame">Host</span>\r\n<span class="label label-info" ng-if="player.id === game.me.id">Me</span>\r\n<span class="label label-primary" ng-if="player.first && game.phase===\'prediction\'">1st</span>\r\n<span class="label label-warning" ng-if="player.turn && game.phase!==\'prediction\'">Turn</span>\r\n<span class="label label-danger" ng-if="player.disconnected">Disconnected</span>'),a.put("/directives/prediction/prediction.html",'<div ng-show="game.me.prediction===null && game.phase===\'prediction\'">\r\n    <h3>{{game.round}}Round Prediction</h3>\r\n    - <b>You are the {{game.me.turnIndex}} order</b>\r\n\r\n    <div ng-bind-html="desc" ng-class="{\'color-red\':error}"></div>\r\n    <div class="btn" ng-class="{\'btn-primary\':$index !== 0,\'btn-danger\':$index === 0}" ng-click="predict($index)"\r\n         ng-repeat="round in (game.round+1).toArray()">\r\n        {{$index}}Win\r\n    </div>\r\n</div>\r\n<h1 ng-show="game.me.prediction!==null && game.phase===\'prediction\'">Wait for other player\'s prediction</h1>\r\n'),a.put("/directives/prime-color/prime.html",'<span class="color" ng-style="{background:getColor(color), color:white, \'border-color\':getColor(color)}" ng-if="color">{{color}}</span>\r\n<span class="color blank" ng-style="{background:getColor(color)}" ng-if="!color">Prime Color</span>'),a.put("/directives/progress/progress.html",'<div ng-style="getStyle()" class="bar"></div>'),a.put("/directives/submit-card/submit-card.html",'<div class="card" ng-class="{me:player.id === game.me.id, turn:player.turn}">\r\n    <card card="player.submitCard" ng-if="player.submitCard"></card>\r\n    <span class="blank-card" ng-class="{turn:player.turn}" ng-if="!player.submitCard">\r\n    <span class="prepare">\r\n        <div class="name">\r\n            {{player.name}}<br> {{player.point}}Point {{player.win}}/{{player.prediction}}\r\n        </div>\r\n        {{player.turnIndex}}\r\n    </span>\r\n    <span class="submit-card">\r\n    Submit a Card\r\n    </span>\r\n    </span>\r\n</div>'),a.put("/directives/toggle/toggle.html",'<i class="fa" ng-class="icon"></i>'),a.put("/pages/game/game.html",'<div ng-class="{myturn:(game.me.turn && game.phase===\'submit\') || game.phase===\'prediction\'}"\r\n     class="layout-column flex wrap">\r\n    <phase game="game"></phase>\r\n    <prediction class="flex layout-row layout-align-center-center" game="game"\r\n                ng-if="game.phase===\'prediction\'"></prediction>\r\n    <div class="ready flex layout-row layout-align-center-center" ng-if="!game.onGame" style="overflow-y:auto">\r\n        <div class="room-info">\r\n            <h3>{{game.name}}</h3>\r\n            <div>Wait for players...</div>\r\n            <div>{{game.maxRounds}} rounds</div>\r\n            <div>Max Players: {{game.maxSize}}</div>\r\n            <div>Turn Limit Time: {{game.submitLimitTime/1000||0}}Sec</div>\r\n            <div>Prediction Limit Time: {{game.predictLimitTime/1000||0}}Sec</div>\r\n            <div>\r\n                <span><b>King:</b> {{game.cardOptions.king}},</span>\r\n                <span><b>Pirate:</b> {{game.cardOptions.pirate}},</span>\r\n                <span><b>Pirate/Escape:</b> {{game.cardOptions.pirateOR}},</span>\r\n                <span><b>Gir:</b> {{game.cardOptions.girl}},</span>\r\n                <span><b>Number:</b> 1~{{game.cardOptions.numbers}},</span>\r\n                <span><b>Escape:</b> {{game.cardOptions.white}}</span>\r\n            </div>\r\n            <div class="btn btn-primary" style="margin-top:40px;" ng-if="game.me.maker" ng-click="startGame()">Start Game</div>\r\n            <div ng-if="!game.me.maker">Host user can start game.</div>\r\n        </div>\r\n    </div>\r\n    <div ng-if="game.phase===\'submit\'" class="layout-column flex">\r\n        <div class="card-block flex field layout-column layout-align-center-center"\r\n             ng-class="{red:(game.duration - remain) / 1000 < 5}" ng-drop\r\n             ng-drop-success="submit($data)">\r\n            <prime-color class="hidden-sm" color="game.rounds.last().steps.last().prime"></prime-color>\r\n            <div>\r\n                <submit-card player="player" game="game"\r\n                             ng-repeat="player in game.players | orderBy:\'turnIndex\'"\r\n                             card="player.submitCard"></submit-card>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="layout-row" ng-if="game.onGame">\r\n        <div class="flex"></div>\r\n        <div class="flex" ng-repeat="card in game.me.cards track by $index">\r\n            <card ng-drag\r\n                  ng-class="{submitable:game.me.turn && card.submitable && game.phase===\'submit\',winable:game.me.turn && card.winable && game.phase===\'submit\'}"\r\n                  ng-drag-data="card"\r\n\r\n                  card="card"></card>\r\n        </div>\r\n        <div style="width:125px"></div>\r\n    </div>\r\n    <div class="toggles layout-row">\r\n        <span ng-if="remain>0 && game.onGame" ng-class="{red:(game.duration - remain) / 1000 < 5}" class="time">{{(game.duration - remain) >0?(game.duration - remain) / 1000:0 | number : 1}}/{{game.duration / 1000| number : 0}}</span>\r\n        <span class="flex"></span>\r\n        <toggle icon="{{newChat ? \'fa-commenting-o\':\'fa-comment-o\'}}" toggle="chatShow"></toggle>\r\n        <toggle icon="fa-user" toggle="userShow"></toggle>\r\n        <toggle icon="fa-history" toggle="historyShow"></toggle>\r\n    </div>\r\n\r\n    <progressbar ng-show="game.duration" value="remain/game.duration*100"></progressbar>\r\n    <div style="color:black;">\r\n        <div ng-if="userShow">\r\n            <player ng-click="name(player)"\r\n                    ng-class="{myturn:player.id === game.me.id&&player.turn&&game.phase===\'submit\'}"\r\n                    index="$index"\r\n                    ng-repeat="player in game.players"\r\n                    game="game" player="player">\r\n            </player>\r\n        </div>\r\n        <chat ng-if="chatShow"></chat>\r\n        <history ng-if="historyShow" game="game"></history>\r\n        <div class="close-btn" ng-click="historyShow=false;chatShow=false;userShow=false" ng-show="historyShow||chatShow||userShow"><i class="fa fa-times"></i>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("/pages/rooms/rooms.html",'<div class="container">\r\n\r\n    <h3>SkullKing Online - OnePiece Theme</h3>\r\n    <div>\r\n        <div ng-if="!user._id">\r\n            <span class="btn btn-primary" ng-click="registerPopup()">Register</span>\r\n            <span class="btn btn-primary" ng-click="loginPopup()">Login</span>\r\n        </div>\r\n        <div ng-if="user._id">\r\n            {{user.name}} ({{user.point}}) <span class="btn btn-primary" ng-click="logout()">Logout</span>\r\n        </div>\r\n    </div>\r\n\r\n    <div>\r\n        <h5>Rooms <span ng-click="refresh()" class="label-warning label">Refresh</span></h5>\r\n        <table class="table table-striped room">\r\n            <thead>\r\n            <tr>\r\n                <th><i class="fa fa-sort-numeric-asc"></i></th>\r\n                <th><i class="fa fa-sort-numeric-header"></i></th>\r\n                <th><i class="fa fa-user"></i></th>\r\n                <th><i class="fa fa-users"></i></th>\r\n                <th><i class="fa fa-clock-o"></i></th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="room in rooms" ng-click="go(room)">\r\n                <td>{{$index+1}}</td>\r\n                <td>{{room.name}}</td>\r\n                <td>{{room.maker}}</td>\r\n                <td>{{room.size}}/{{room.maxSize}}</td>\r\n                <td>{{room.createdAt.toYMD()}}</td>\r\n            </tr>\r\n            <tr ng-if="rooms.length===0">\r\n                <td colspan="5">No games.</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n        <div ng-click="makeRoomPopup()" class="btn btn-primary">Make a Room</div>\r\n    </div>\r\n    <div style="margin-top:30px;">\r\n        <h5>Rule</h5>\r\n        <ul class="list-group">\r\n            <li class="list-group-item">\r\n                게임은 총 10 라운드로 진행되며, <span uib-tooltip="1라운드는 1번, 2라운드는 2번...">각 라운드 만큼의<span\r\n                    class="fa fa-question-circle"></span></span>\r\n                <span uib-tooltip="모든 플레이어가 순서대로 카드를 1장 내고, 가장 높은 카드가 승리합니다.">전투<span\r\n                        class="fa fa-question-circle"></span></span>가 진행됩니다.\r\n            </li>\r\n            <li class="list-group-item">\r\n                라운드 시작전 플레이어는 해당 라운드에서 몇번 승리할지 예측하고,\r\n                <br> 라운드 종료시 <span uib-tooltip="예측수 *20 / 0승 예측시 라운드*10">맞았으면 점수를 획득<span\r\n                    class="fa fa-question-circle"></span></span>하고 <span\r\n                    uib-tooltip="틀린횟수(예측수-실제 승리) * 10 / 0승 예측시 라운드*10">틀렸으면 점수를 잃습니다.<span\r\n                    class="fa fa-question-circle"></span></span>\r\n            </li>\r\n            <li class="list-group-item">\r\n                10 라운드 종료 후 점수가 가장 높은 플레이어가 승리합니다.\r\n            </li>\r\n            <li class="list-group-item">\r\n                카드는 다음의 순서로 강합니다.<br>\r\n                <div style="font-size:10px;">\r\n                    <span>King</span>\r\n                    <mark mark="king"></mark>\r\n                    <span>> Pirate</span>\r\n                    <mark mark="pirate"></mark>\r\n                    <span>> Girl</span>\r\n                    <mark mark="girl"></mark>\r\n                    <span>> Black</span>\r\n                    <mark mark="black"></mark>\r\n                    <span>> Red</span>\r\n                    <mark mark="red"></mark>\r\n                    <span>= Blue</span>\r\n                    <mark mark="blue"></mark>\r\n                    <span>= Yellow</span>\r\n                    <mark mark="yellow"></mark>\r\n                    <span>> Escape</span>\r\n                    <mark mark="white"></mark>\r\n                </div>\r\n                <br>\r\n                <b>해적왕과 여자가 함께 나오면 여자가 승리합니다.</b><br>\r\n                빨강, 파랑, 노랑 카드는 해당 라운드에 먼저 나온 카드가 가장 강합니다.\r\n            </li>\r\n            <li class="list-group-item">\r\n                같은 레벨의 카드라면, 먼저 나온 카드가 승리합니다.\r\n            </li>\r\n            <li class="list-group-item">\r\n                같은 색의 카드라면 높은 숫자를 가진 카드가 승리합니다.\r\n            </li>\r\n            <li class="list-group-item">\r\n                먼저 나온 색깔의 카드가 있다면, 그 카드 내거나 색깔이 없는 카드를 내야 합니다.\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div ng-if="ranks.length>0" style="margin-top:30px;">\r\n        <h5>Rank (1st~30th) <span ng-click="refreshRank()" class="label-warning label">Refresh</span></h5>\r\n        <table class="table table-striped room">\r\n            <thead>\r\n            <tr style="font-size:12px;">\r\n                <th><i class="fa fa-sort-numeric-asc"></i></th>\r\n                <th><i class="fa fa-user"></i></th>\r\n                <th>Games</th>\r\n                <th>Point</th>\r\n                <th class="hidden-sm">Avg.Point</th>\r\n                <th class="hidden-sm">Avg.Percent</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr ng-repeat="ranker in ranks">\r\n                <td>{{$index+1}}</td>\r\n                <td>{{ranker.name}}</td>\r\n                <td>{{ranker.ranks.length}}</td>\r\n                <td>{{ranker.point}}</td>\r\n                <td class="hidden-sm">{{ranker.avgPoint || 0 | number:1}}</td>\r\n                <td class="hidden-sm">{{ranker.avgRank*100 || 0 | number:1}}%</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class="cards">\r\n        <div>Card examples</div>\r\n        <div style="text-align: center">\r\n            <card card="card" ng-class="{submitable:card.submitable,\'winable\':card.winable}"\r\n                  ng-repeat="card in cards"></card>\r\n        </div>\r\n    </div>\r\n</div>')}]);