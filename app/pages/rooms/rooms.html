<div class="container">
    <div class="card-block">
        <h5>스컬킹 온라인</h5>

        <div ng-if="!user._id">
            <span class="btn btn-primary" ng-click="registerPopup()">회원가입</span>
            <span class="btn btn-primary" ng-click="loginPopup()">로그인</span>
        </div>
        <div ng-if="user._id">
            {{user.name}} ({{user.point}}) <span class="btn btn-primary" ng-click="logout()">로그아웃</span>
        </div>
    </div>

    <div>
        <h5>방목록 <span ng-click="refresh()" class="label-warning label">새로고침</span></h5>
        <table class="table table-striped room">
            <thead>
            <tr>
                <th><i class="fa fa-sort-numeric-asc"></i></th>
                <th><i class="fa fa-sort-numeric-header"></i></th>
                <th><i class="fa fa-user"></i></th>
                <th><i class="fa fa-users"></i></th>
                <th><i class="fa fa-clock-o"></i></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="room in rooms" ng-click="go(room)">
                <td>{{$index+1}}</td>
                <td>{{room.name}}</td>
                <td>{{room.maker}}</td>
                <td>{{room.size}}/{{room.maxSize}}</td>
                <td>{{room.createdAt | date}}</td>
            </tr>
            <tr ng-if="rooms.length===0">
                <td colspan="5">방이 없네요.</td>
            </tr>
            </tbody>
        </table>
        <div ng-click="makeRoomPopup()" class="btn btn-primary">방만들기</div>
    </div>
    <div ng-if="ranks.length>0" style="margin-top:30px;">
        <div>순위 (1~30위) <span ng-click="refreshRank()" class="label-warning label">새로고침</span></div>
        <table class="table table-striped room">
            <thead>
            <tr style="font-size:12px;">
                <th><i class="fa fa-sort-numeric-asc"></i></th>
                <th><i class="fa fa-user"></i></th>
                <th>참여</th>
                <th>점수</th>
                <th>평균 점수</th>
                <th>평균 상위</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="ranker in ranks">
                <td>{{$index+1}}</td>
                <td>{{ranker.name}}</td>
                <td>{{ranker.ranks.length}}</td>
                <td>{{ranker.point}}</td>
                <td>{{ranker.avgPoint|number:1}}</td>
                <td>{{ranker.avgRank*100|number:1}}%</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>